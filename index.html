<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Muse","version":"7.7.2","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":null,"activeClass":"gitalk"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Xiaoxing Chen&#39;s Space">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Xiaoxing Chen&#39;s Space">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Xiaoxing">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false
  };
</script>

  <title>Xiaoxing Chen's Space</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Xiaoxing Chen's Space</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>About</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/05/07/least_l1_norm_problem/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Xiaoxing">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Xiaoxing Chen's Space">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/07/least_l1_norm_problem/" class="post-title-link" itemprop="url">Least L1-norm Problem</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-05-07 00:00:00" itemprop="dateCreated datePublished" datetime="2020-05-07T00:00:00+08:00">2020-05-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-10-04 20:22:59" itemprop="dateModified" datetime="2020-10-04T20:22:59+08:00">2020-10-04</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <head>
    <script type="text/javascript" async
            src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
        </script>
        <style>
            .bib ol { counter-reset: item }
            .bib li { display: block ; counter-increment: item; }
            .bib li:before { content: " ["counter(item)"] "; }
        </style>
</head>
<body>
    <h2>Background</h2>
    <p>This article came from a Leetcode problem: <a href="https://leetcode.com/problems/minimum-moves-to-equal-array-elements-ii/" target="_blank" rel="noopener">462. Minimum Moves to Equal Array Elements II</a>.
        For the sake of reading experience, I paste the problem description here: 
    </p>
    <blockquote>
        <p>
            Given a <b>non-empty</b> integer array, 
            find the minimum number of moves required to make all array elements equal, 
            where a move is incrementing a selected element by 1 or decrementing a selected element by 1.
        </p>
        <p>You may assume the array's length is at most 10,000.</p>
        <p><b>Example:</b></p>
    
        <pre><b>Input:</b>
        [1,2,3]
        
        <b>Output:</b>
        2
        
        <b>Explanation:</b>
        Only two moves are needed (remember each move increments or decrements one element):
        
        [1,2,3]  =&gt;  [2,2,3]  =&gt;  [2,2,2]
        </pre>
    </blockquote>
    <p>
        My first intuition was to sum the distances between each element and the mean(average) of the list, which failed to pass the 
        test. Here we discuss the problem in a mathematical way.
    </p>

    <h2>Problem Statement</h2>
    <p>The description:</p>
    <blockquote>
        find the minimum number of moves required to make all array elements equal.
    </blockquote>
    <p>means we need to find a \(m\) which satisfies:</p>
    \[
        \arg\min_m \sum_{i=1}^n |x_i - m|
        \tag{1-1}
    \]
    <p>\(x\) is an \(n\) dimensional vector.</p>
    <p>
        In other words, the \(m\) we need is to minimize the L1-norm of the residual. 
        While the average of a list minimize the L2-norm of the residual. 
    </p>
    <h2>Derivation</h2>
    <p>In order to find \(m\), we can borrow the idea of how the average \(\mu\) was found:</p>
    \[
        \arg\min_\mu (x - \mu)^\top(x - \mu)
        \tag{2-1}
    \]

    <p>The minimum can be found by setting its derivative to 0: </p>
    \[
        \frac{\text{d}}{\text{d}\mu} (x - \mu)^\top(x - \mu) = \frac{\text{d}}{\text{d}\mu} (x^\top x - 2\mu\sum_{i=1}^n x_i + n\mu ^2) = 0
        \tag{2-2}
    \]
    \[
        2n\mu - 2\sum_{i=1}^n x_i = 0
    \]
    \[
        \mu = \frac{\sum_{i=1}^n x_i}{n} \tag{2-3}
    \]

    <p>We write formulation (1-1) as:</p>
    \[
        \arg\min_m \sum_{i=1}^n \sqrt{(x_i - m)^2}
        \tag{2-4}
    \]
    <p>Set the derivative to 0:</p>
    \[
        \frac{\text{d}}{\text{d}m} \sum_{i=1}^n \sqrt{(x_i - m)^2} = \sum_{i=1}^n \frac{x_i - m}{\sqrt{(x_i - m)^2}} \\
        = \sum_{i=1}^n \text{sign} (x_i - m) = 0 \tag{2-5}
    \]
    <p>Formula (2-5) indicates that when \(m\) lies on the coordinate 
        such that the number of \(x_i\) greater than \(m\) equals to the number of \(x_i\) less than \(m\), 
        \(m\) minimizes the L1-norm of the residual. It is worth noting that there are more than one solution.
        The median of the vector \(x\) can be a solution.
    </p>

    <figure>
        <img src="/2020/05/07/least_l1_norm_problem/m_l2_norm.svg" style="width:100%">
        <figcaption>
            Given 10 dimensional vector \(x\), plot \(m\) with respect to the L2-norm of residual.
            It can be seen that the \(m\) minimizing L1-norm is not unique. 
            <a href="/2020/05/07/least_l1_norm_problem/main.py">
            [source code]</a>
        </figcaption>
    </figure>

    <h2>Summary</h2>    
    <p>A clean solution of the leetcode problem can be:</p>
    <pre>
    class Solution:
        def minMoves2(self, nums: List[int]) -> int:
            nums.sort()
            m = nums[len(nums) // 2]
            return sum([abs(n - m) for n in nums])
    </pre>

    
    <h2>References</h2>
    <ol class="bib">
        <li>log0,<a href="http://www.chioka.in/differences-between-the-l1-norm-and-the-l2-norm-least-absolute-deviations-and-least-squares/" target="_blank" rel="noopener">
            Differences between the L1-norm and the L2-norm (Least Absolute Deviations and Least Squares)</a>
        </li>
        <li>
            hattenn, Royi<a href="https://math.stackexchange.com/questions/113270/the-median-minimizes-the-sum-of-absolute-deviations-the-l-1-norm" target="_blank" rel="noopener">
            The Median Minimizes the Sum of Absolute Deviations (The L1 Norm)</a> StackExchange
        </li>
    </ol>
</body>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/05/04/gpu_particle_filter/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Xiaoxing">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Xiaoxing Chen's Space">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/04/gpu_particle_filter/" class="post-title-link" itemprop="url">Particle Filter with GPU Implementation</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-05-04 00:00:00" itemprop="dateCreated datePublished" datetime="2020-05-04T00:00:00+08:00">2020-05-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-10-04 20:36:02" itemprop="dateModified" datetime="2020-10-04T20:36:02+08:00">2020-10-04</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script type="text/javascript" async
            src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
        </script>
        <style>
            .bib ol { counter-reset: item }
            .bib li { display: block ; counter-increment: item; }
            .bib li:before { content: " ["counter(item)"] "; }

            code.md{
                background-color:#eee;
                color:deeppink;
                border-radius: 3px;
                border:1px solid #888;
                padding: 2px 2px;
            }
            pre.md{
                background-color:#eee;
                border-radius: 3px;
                border: 1px solid #888 ;
            }
            blockquote.md{
                padding: 0 1em;
                border-left: .25em solid #888;
            }
        </style>

</head>
<body>
    <p>A toy example helps understand OpenCL and particle filter <a href="https://github.com/XiaoxingChen/gpu_particle_filter" target="_blank" rel="noopener">[source code]</a>].</p>
    <h2>Notations</h2>
    <ul>
        <li>state vector: \(\mathrm{x} \in \mathfrak{se}(2)\)</li>
        <li>motion noise: \(\mathrm{w}\)</li>
        <li>motion measurement: \(\mathrm{v}\)</li>
        <li>observation: \(\mathrm{y}\)</li>
        <li>motion model: \(\mathrm{x}_k = f(\mathrm{x}_{k-1}, \mathrm{v}_k, \mathrm{w}_k)\), \(k = 1, \dots, K\)</li>
        <li>observation model: \(\mathrm{y}_k = g(\mathrm{x}_k, \mathrm{n}_k)\), \(k = 0, \dots, K\)</li>
        <li>Number of particles: \(N\)</li>
        <li>Weight of particles: \(\omega\)</li>
        
    </ul>

    <h2>Estimation</h2>
    <p><b>1. Prediction</b></p>
    <p>Unlike steps in the <a title="State estimation for robotics">textbook</a><sup><a href="" title="http://asrl.utias.utoronto.ca/~tdb/bib/barfoot_ser17.pdf">[1]</a></sup>, I do prediction before sampling particles.</p>

    \[
        \hat{\mathrm{x}}_{k} = f(\mathrm{x}_{k-1}, \mathrm{v}_k, \mathrm{w}_{k})
        \tag{2-1}
    \]

    <p><b>2. Particle sampling </b></p>
    \[
        \left[
        \begin{matrix}
            \check{\mathrm{x}}_{k,m} \\ 
            \mathrm{w}_{k,m}
        \end{matrix}
        \right]
        \leftarrow

        p(\hat{\mathrm{x}}_{k}) p(\mathrm{w}_{k-1})
        \tag{2-2}
    \]

    <p><b>3. Likelihood calculation</b></p>
    <p>Here I use the likelihood between the simulated LiDAR measurement to actual LiDAR sensor data as the particle weight.</p>
    \[
        \omega_{k,m} \propto p(y_k | \check{\mathrm{x}}_{k,m}) = p(y_k | \check{\mathrm{y}}_{k,m})
        \tag{2-3}
    \]
    <p>LiDAR measurement model: </p>
    \[
        p(y_k|\check{\mathrm{y}}_{k,m}) = 
        \begin{cases}
        \text{PDF}(y_k - \check{\mathrm{y}}_{k,m}) && \text{ if } \ y_k, \check{\mathrm{y}}_{k,m} \le L_{max}), \\
        1 - \text{CDF}(y_k - \check{\mathrm{y}}_{k,m}) && \text{ if } \ y_k > L_{max} \text{ or } \check{\mathrm{y}}_{k,m} > L_{max}, \\
        \epsilon && \text{else}
        \end{cases}
        \tag{2-4}
    \]

    <p>
        \(L_{max}\) means the maximum measure distance of the LiDAR sensor. 
        \(\text{PDF}\) is the probabilistic distribution function of the sensor model, 
        a gaussian model is used in this project. 
        \(\text{CDF}\) is the cumulative distribution function of the sensor model.
        \(epsilon\) is a constant small value in code implementation which minimizes the impact of 
        overranged LiDAR beam.
    </p>

    <p><b>4. Resampling</b></p>
    <p>I use the method in this paper<sup><a href="https://cse.sc.edu/~terejanu/files/tutorialMC.pdf" target="_blank" rel="noopener">[2]</a></sup> to do resampling.
    <a href="https://leetcode.com/problems/random-pick-with-weight/" target="_blank" rel="noopener">Leetcode 528</a> is also helpful for understanding.</p>

    <h2>Parallelization</h2>
    <p>
        In this project, I use line segments to represent objects in map without any acceleration structure. 
        For a single line LiDAR with resolution \(H\), working in a map with \(S\) segments, a particle filter with \(N\) particles has to 
        calculate line intersection for with complexity \(O(H \times S \times N)\). While those calculations are totally independent, 
        it is available to do parallelization. The determination of line segment intersection is presented here<sup><a href="https://xiaoxingchen.github.io/2018/10/13/planar_line_segment_intersection/" target="_blank" rel="noopener">[4]</a></sup>.
    </p>
    <p>
        After eliminating the LiDAR beams that never intersect with objects, the rest beams' measure distances were calculated. 
        <a href="https://en.wikipedia.org/wiki/Reduction_Operator" target="_blank" rel="noopener">Parallel reduction</a> was used to find the "close hit" among all intersections of a single LiDAR beam. 
    </p>

    <p>
        Besides, the likelihood between simulation and actual measurement are also calculated in GPU. 
        To avoid float point overflow, the calculation was done in logarithmic space. 
        For there is no built-in cumulative gaussian function in OpenCL, it is <a href="https://en.wikipedia.org/wiki/Normal_distribution#Cumulative_distribution_function" target="_blank" rel="noopener">approximated by error function</a>:
    </p>
    \[
        \text{CDF}(x) = \frac{1}{2}
        \left[
        1 + \text(erf)(\frac{x - \mu}{\sigma \sqrt 2})
        \right]
    \]

    <h2>Experiments</h2>
    <h3>Ice World</h3>
    <figure>
        <img src="https://user-images.githubusercontent.com/16934019/80937927-a1e1c880-8e09-11ea-99cb-6fa34e88f895.gif" style="width:70%">
        <figcaption>
            Fig.1 - LiDAR resolution: 32, LiDAR measure distance: 50 meters, particle number: 512.
        </figcaption>
    </figure>

    <h3>Featureless Corridor</h3>
    <figure>
        <img src="https://user-images.githubusercontent.com/16934019/80937931-aa3a0380-8e09-11ea-9937-49a308e7e95d.gif" style="width:70%">
        <figcaption>
            Fig.2 - LiDAR measure distance: 20 meters. As shown in the image, particle filter can easily lost in feature less scenario. 
            The covariance in longitudinal direction increase drastically while in lateral direction it is till stable.
            The localization converge immediately when LiDAR beam detects corner. 
        </figcaption>
    </figure>
    

    <h3>Circular Corridor</h3>
    <figure>
        <img src="https://user-images.githubusercontent.com/16934019/80937934-ac03c700-8e09-11ea-95ee-2300c933b5f3.gif" style="width:70%">
        <figcaption>
            Fig.3 - The localization is stable the LiDAR beam matches well to the wall. However the estimated position deviated from the actual position. 
            In this situation, one dimension of the localization is unobservable(need confirm).
        </figcaption>
    </figure>
    <h2>References</h2>
    <p>
        <ol class="bib">
            <li>
                Barfoot, Timothy D. 
            <cite>
                <a href="http://asrl.utias.utoronto.ca/~tdb/bib/barfoot_ser17.pdf" target="_blank" rel="noopener">"State estimation for robotics."</a>
            </cite>
                Cambridge University Press, 2017.
            </li>
            <li>
            Terejanu, Gabriel A. 
            <cite>
                <a href="https://cse.sc.edu/~terejanu/files/tutorialMC.pdf" target="_blank" rel="noopener">"Tutorial on Monte Carlo Techniques." </a>
            </cite>
                Department of Computer Science and Engineering. University at Buffalo (2009).
            </li>
            <li>
                Atsushi, Sakai. 
                <a href="https://github.com/AtsushiSakai/PythonRobotics/blob/master/Localization/particle_filter/particle_filter.py" target="_blank" rel="noopener">"PythonRobotics."</a>
            </li>
            <li>
                Xiaoxing, Chen. 
                <a href="https://xiaoxingchen.github.io/2018/10/13/planar_line_segment_intersection/" target="_blank" rel="noopener">"Determine Intersection of Two Planar Line Segments"</a>
            </li>
        </ol>
    </p>
</body>
</html>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/14/essential_mat_by_optimization/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Xiaoxing">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Xiaoxing Chen's Space">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/14/essential_mat_by_optimization/" class="post-title-link" itemprop="url">Solve Epipolar Constraint by Optimization over Unit Sphere Manifold</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-03-14 00:00:00" itemprop="dateCreated datePublished" datetime="2020-03-14T00:00:00+08:00">2020-03-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-07-02 23:21:33" itemprop="dateModified" datetime="2020-07-02T23:21:33+08:00">2020-07-02</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <head>
    <script type="text/javascript" async
            src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
        </script>
        <style>
            .bib ol { counter-reset: item }
            .bib li { display: block ; counter-increment: item; }
            .bib li:before { content: " ["counter(item)"] "; }
        </style>
</head>
<body>
    <h1>Motivation</h1>
    <p>
        While estimating the transform between two images, one has to solve the Essential Matrix according to Epipolar Constraint:
    </p>
    \[
        x_2^\top E x_1 = 0 
        \tag{1-1}
    \]
    <p>Five-point-algorithm and eight-point-algorithm are both applicable. 
        Here I take eight-point algorithm as example. The essential matrix is vectorized,
        and equation (1-1) is transformed to a homogeneous equation in form \(Ax = 0\). 
        The homogeneous equation can be solved by SVD, and the essential matrix will be recovered from vector \(x\).
    </p>
    <p>
        However, according to the definition of essential matrix:
    </p>
    \[
    E = \{ S R | S = t^\wedge \in \mathfrak{so}(3), R \in SO(3)\} \tag{1-2}
    \]
    <p>
        Singular values of a essential matrix are \([1,1,0]\) <sup><a href="/2020/01/20/essential_mat_sig_val">[1]</a></sup>.
        In order to make the solution "essential", a general solution<sup>[2]</sup> is to SVD the result and replace its singular value with \([1,1,0]\).
        The matrix \(\hat E\) is the projection of matrix \(E\) on essential manifold. 
        By decomposing motion from essential matrix, one will get four solutions. 
        Only one of the four solutions is available, whose feature points have position depth in camera.
        Finally, the rotation matrix and translation vector are recovered.
    </p>
    \[
        \hat E = U_E \text{diag}(1,1,0)  V_E^\top
        \tag{1-3}
    \]
    <p>
        In this article, I am going to implement an optimization based method to find the essential matrix. 
    </p>
    <h1>Problem Formulation</h1>
    <h2>Parameterization</h2>
    <p>
        Few papers talk about properties of essential manifold.
        Let's see what will happen if I solve the problem with only constraint the rotation matrix.
        I parameterize the essential matrix to a 6-dimensional vector: 3-dimensional translation vector and 3-dimension rotation.
        But it was denied after I found the equation will always converge at the point where translation vector \(t = [0,  0,  0]^\top\).
        This is where "pure rotation" happens, the constraint "degenerated". 
        Therefore, I finally added a constraint \(\|t\| = 1\), to restrict the translation vector on a unit sphere.
        If I can turn the unit sphere manifold to a Lie Group, the the solution can be solve as what one do to the rotation part.
        Unluckily, the answer was "NO": 
        <a href="https://math.stackexchange.com/questions/3481290/can-every-manifold-be-turned-into-a-lie-group" target="_blank" rel="noopener">
            \(S^2\) manifold cannot be given a Lie Group structure</a>.
    </p>
    <p>
        Anyway, the idea of constrained optimization is to iterate the state vector without breaking the constraint.
        The translation vector on unit sphere has degree of 2, the essential matrix was then vectorized to \(E = [\tau_x, \tau_y, \psi_x, \psi_y, \psi_z]^\top\). 
        Every step I calculate the jacobian of the translation vector in two orthogonal directions. 
        In order to preserve the incremental direction, the translation vector is stored in a orthonormal matrix \(T = [t_x, t_y, t_z], T \in SO(3)\).
        The first two columns of the matrix \(t_x, t_y\) indicates the incremental directions, the last column \(t_z\) is the vector itself.
    </p>
    <h2>Cost Function</h2>
    <p>Residual: </p>
    \[
        f(x) = x_1^\top t_z^\wedge R x_2 \tag{2-1}
    \]

    <p>The problem then comes to:</p>
    \[
        \text{arg}\ \text{min} F(t_z, R) = \frac{1}{2} \sum_{i = 1} ^ n \|f(t_z, R)\|^2 
        = \frac{1}{2} \sum_{i = 1} ^ n 
        \left( 
            (x_{1,i}^\top t_z^\wedge R x_{2,i})^\top (x_{1,i}^\top t_z^\wedge R x_{2,i}) 
        \right)
        \tag{2-2}
    \]

    <h2>Jacobian</h2>
    <p>I use numerical method to calculate the jacobian.</p>
    \[
        J = 
        \left[
        \begin{matrix}
        \frac{\partial f}{\partial \tau_x} &
        \frac{\partial f}{\partial \tau_y} &
        \frac{\partial f}{\partial \psi_x} &
        \frac{\partial f}{\partial \psi_y} &
        \frac{\partial f}{\partial \psi_z}
        \end{matrix}
        \right]
        \tag{2-3}
    \]
    <h2>Update</h2>
    \[
        \begin{cases}
            \Delta \tau = [\Delta \tau_x, \Delta \tau_y, 0]^\top\\
            T_k = \text{exp} (\Delta \tau ^ \wedge) T_{k-1} \\
            t_{z,k} = T_{k[:,3]} \\ 
            R_k = \text{exp} (\Delta \psi ^ \wedge) R_{k-1}
        \end{cases}
        \tag{2-4}
    \]

    <h1>Simulation</h1>
    <p>
        Two cameras were set at position \((0.5, -0.8, 0.5)m\) and \((0.6, -0.8, 0.5)m\), 
        their orientations were presented in rotation vectors: \((-\frac{\pi}{2}, 0, 0)rad\), \((-\frac{\pi}{2}, 0.1, 0)rad\).
        Totally 60 points were generated.
    </p>

    <figure>
        <img src="/2020/03/14/essential_mat_by_optimization/3d_view.svg" style="width:70%">
        <figcaption>
            Fig.1 - Generate point cloud in 3D space, the red arrows indicate the pose of cameras. 
        </figcaption>
        
    </figure>
        
    <figure>
        <img src="/2020/03/14/essential_mat_by_optimization/essential_by_gn.svg" style="width:100%">
        <figcaption>
            Fig.2 - Project points to normalized camera coordinate. 
            The point IDs are known to algorithm so that there is no outliers in matching.
            <a href="https://github.com/XiaoxingChen/pyproj/blob/master/epipolar_geometry/essential_by_gn.py" target="_blank" rel="noopener">
            [source code]</a>
        </figcaption>
    </figure>

    <p>The Gauss-Newton method was used to calculate the update. 
        Given initial value \(t = (\frac{1}{\sqrt{2}}, \frac{1}{\sqrt{2}}, 0)\), \(\psi = (0, -0.1, 0)\)
        The cost converged within 10 iterations.
    </p>
    <pre><code class="language-log">
        it: 0, cost: 32027813.76362674
        it: 1, cost: 77838.5880822376
        it: 2, cost: 6281.828095169881
        it: 3, cost: 112.93046933952343
        it: 4, cost: 6.927671506086043
        it: 5, cost: 1.0246290629301655e-07
        it: 6, cost: 1.2263197696799394e-15
        it: 7, cost: 3.9916308419887783e-25
        it: 8, cost: 4.27369517787316e-25
        it: 9, cost: 2.6192914664154937e-25
        t: [ 9.9984608e-01 -7.6998377e-17 -1.7341515e-16], r: [-0.0011568  0.0636558  0.0636558]
        groundtruth: t01: [0.1 0.  0. ], r01: [-0.0011568  0.0636558  0.0636558]
    </code></pre>

    <figure>
        <img src="/2020/03/14/essential_mat_by_optimization/viz_iteration.svg" style="width:70%">
        <figcaption align='center'>
            Fig.3 - Cost in iteration.
        </figcaption>
    </figure>

    <h1>Conclusion</h1>
    <p>
        Compared with eight-point-algorithm, there is no "linear space to manifold" projection required in optimization based method.
        Every iteration was restricted on manifold. Besides, optimization method does not need essential matrix decomposition.
        The optimization targets are rotation and translation direction.
        However, with different iteration initial values, the method may converge to any of the four 
        possible solutions. Developer has to recover four solutions from the converged one and verify all of them.
        The accuracy of both methods are reliable, errors come from numerical computation.
    </p>

    <h1>References</h1>
    <ol class="bib">
        <li>
            Xiaoxing.
            <cite>
                <a href="/2020/01/20/essential_mat_sig_val">
                    Singular Values of Essential Matrix
                </a>
            </cite>
        </li>
        <li>
            Zhang, Zhengyou. 
            <cite>
                "Determining the epipolar geometry and its uncertainty: A review."
            </cite>
            International journal of computer vision 27.2 (1998): 161-195.
        </li>
    </ol>
    
</body>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/02/bspline_in_so3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Xiaoxing">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Xiaoxing Chen's Space">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/02/bspline_in_so3/" class="post-title-link" itemprop="url">B-Spline in Space I - Euclidean Space</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-03-02 00:00:00" itemprop="dateCreated datePublished" datetime="2020-03-02T00:00:00+08:00">2020-03-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-10-04 20:24:57" itemprop="dateModified" datetime="2020-10-04T20:24:57+08:00">2020-10-04</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <head>
    <script type="text/javascript" async
            src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
        </script>
        <style>
            .bib ol { counter-reset: item }
            .bib li { display: block ; counter-increment: item; }
            .bib li:before { content: " ["counter(item)"] "; }
        </style>
</head>

<body>
    <h2>Motivation</h2>
    <p>In a robot system, tens of sensors collecting data in different frequencies and phases.
        When intermediate values between samples are required, linear interpolation can be used to approximate these values according
        to their surrounding samples. In some cases, however, linear interpolation is not qualified due to its 
        lack of continuity in high order derivatives. 
    </p>
    <p>
        Moreover, in robotics, computer graphics and computer vision, physical values are not only expressed in Euclidean Space.
        The orientation of a digital object, the pose of a automatic robot, are described by Quaternion or Lie Group. 
        Some of the readers may have heard about Quaternion SLERP (Spherical Linear Interpolation), which is a general 
        method used in Quaternion interpolation. But SLERP only keeps the intermediate quaternion unit, 
        the derivative continuity before and after a knot is not guaranteed. 
    </p>
    <p>
        With but not limited to the reasons above, B-Spline is widely used in industry and research. 
        Here is a introduction to the principle of B-Spline, both in Euclidean Space and Lie Group.
    </p>
    <h2>Terminologies of B-Spline</h2>
    <table style="min-width: 6in;">
        <col width="20%">
        <col width="15%">
        <col width="65%">
        <tr>
            <th>Terminologies</th>
            <th>Notation</th>
            <th>Explanation</th>
        </tr>
        <tr>
            <td>Independent Variable</td>
            <td>\(t\)</td>
            <td>In state estimation, the independent variable is time \(t\).</td>
        </tr>
        <tr>
            <td>Order</td>
            <td>\(n\)</td>
            <td>Same as the order of final polynomial, the highest exponent.For instance, \(f(x) = 3x^3\) has an order of 4.</td>
        </tr>
        <tr>
            <td>Degree</td>
            <td>\(p\)</td>
            <td>Same as the degree of final polynomial, the highest exponent.For instance, \(f(x) = 3x^3\) has a degree of 3.</td>
        </tr>
        <tr>
            <td>Segment Index</td>
            <td>\(i\)</td>
            <td>A B-Spline is combined with piecewise polynomial, each piece is a segment.</td>
        </tr>
        <tr>
            <td>Knot Vector</td>
            <td>\(k\)</td>
            <td>
                The connect knot, or joint, between every piece of polynomial segment.
                Knot vector lies in the axis of independent variable \(t\).
            </td>
        </tr>
        <tr>
            <td>Basis Function</td>
            <td>\(B_{i,p}(t)\)</td>
            <td>In the expression, \(i\) is the index of polynomial segment, \(p\) is the degree of the basis function.</td>
        </tr>
        <tr>
            <td>Control Points</td>
            <td>\(C_i\)</td>
            <td>Also named as coefficients. Control points are used to describe the weight of each piece of polynomial segment.</td>
        </tr>
    </table>
    <h2>Intuitive Understanding from Figures</h2>

    <figure>
        <img src="/2020/03/02/bspline_in_so3/viz_basis_function.svg" style="width:100%">
        <figcaption>
            Fig.1 - Iterative composition of basis functions. Each segment of basis function \(B_{i,p}(t)\) is composed 
            by its adjacent basis functions in lower degree, which are \(B_{i,p-1}(t)\) and \(B_{i + 1,p-1}(t)\). 
            While basis functions in degree 0 are unit square wave signals.
            <a href="/2020/03/02/bspline_in_so3/viz_basis_function.py">
            [source code]</a>
        </figcaption>
    </figure>

    <figure>
        <img src="/2020/03/02/bspline_in_so3/viz_bspline.svg" style="width:100%">
        <figcaption>
            Fig.2 - The point \(P_{0,2}\) of basis function \(B_{0,2}(t)\) (degree 2 and segment 0), is evaluated by 
            the weighted combination of \(B_{0,1}(t)\) and \(B_{1,1}(t)\). The <b>weight</b> of each component is 
            defined by the distance between \(P_{0,2}\) and its correspondent knot points. 
            As shown in the figure, the knot vector is \([0, 3, 6, 9]^\top\).
            <a href="/2020/03/02/bspline_in_so3/viz_bspline.py">
            [source code]</a>
        </figcaption>
    </figure>

    <figure>
        <img src="/2020/03/02/bspline_in_so3/viz_ctrlpt.svg" style="width:100%">
        <figcaption>
            Fig.3 - A B-Spline with degree 2, named \(S_2(t)\) is generated by weighted combinations of all its 
            basis functions. The weight comes from control points, which are \([1.2, 0.8, 1.1, 1.2, 1.1]\) in the figure.
            The brown dash lines show how control point affect the weight of basis function,
            these lines finally compose the brown spline.
            The knot vector is \([0, 1, 2, 3, 4, 5, 6, 7]^\top\).
            <a href="/2020/03/02/bspline_in_so3/viz_ctrlpt.py">
            [source code]</a>
        </figcaption>
    </figure>
    <h2>Cox-de Boor Recursion Formula</h2>
    <p>A mathematical representation of B-Spline is necessary after the intuitive concept.</p>
    <p>
        Let \(K\) be a set of \(m\) non-decreasing numbers, \(k_0 \le k_1 \le \cdots \le k_{m-1} \). 
        The \(k_i\)s are called knots, the set \(K\) the knot vector, 
        and the half-open interval \([k_i, k_{i+1})\) the i-th knot span. 
        Note that since some \(k_i\)s may be equal, some knot spans may not exist. 
        If the knots are equally spaced (i.e., \(k_{i+1} - k_i\) is a constant for \((0 \le i \le m - 1)\), 
        the knot vector or the knot sequence is said uniform; otherwise, it is non-uniform<sup>[1]</sup>.
    </p>
    <p>
        The i-th B-spline basis function of degree \(p\), written as \(B_{i,p}(t)\), is defined recursively as follows:
    </p>
    \[
        B_{i,0}(t) = 
        \begin{cases}
        1 & \text{if} \ \ t_i \le t < t_{i+1} \\
        0 & \text{otherwise}
        \end{cases}
        \tag{2-1}
    \]

    \[
        B_{i,p}(t) = 
        \frac{t - t_i}{t_{i+p} - t_i} B_{i,p-1}(t) + 
        \frac{t_{i+p+1} - t}{t_{i+p+1} - t_{i+1}} B_{i+1,p-1}(t)
        \tag{2-2}
    \]
    
    <h2>References</h2>
    <ol class="bib">
        <li>Shene,<a href="https://pages.mtu.edu/~shene/COURSES/cs3621/NOTES/spline/B-spline/bspline-basis.html" target="_blank" rel="noopener">
            B-spline Basis Functions: Definition</a>
        </li>
        <li>Kim, M.J., Kim, M.S. and Shin, S.Y., 1995, September.
            <cite>
                <a href="http://graphics.cs.cmu.edu/nsp/course/15-464/Fall05/papers/kimKimShin.pdf" target="_blank" rel="noopener">
                    A general construction scheme for unit quaternion curves with simple high order derivatives.        
                </a>
            </cite>
            In Proceedings of the 22nd annual conference on Computer graphics and interactive techniques (pp. 369-376).
        </li>
        <li>
            Qin, Kaihuai, 
            <cite>
                <a href="/2020/03/02/bspline_in_so3/general_matrix_representation_for_bsplines.pdf">
                    General matrix representations for B-splines
                </a>
            </cite>
                , The Visual Computer (2000) 16:177–186
        </li>
    </ol>

      
</body>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/29/why_here/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Xiaoxing">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Xiaoxing Chen's Space">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/29/why_here/" class="post-title-link" itemprop="url">Why Here</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-02-29 16:27:00" itemprop="dateCreated datePublished" datetime="2020-02-29T16:27:00+08:00">2020-02-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-17 22:03:08" itemprop="dateModified" datetime="2020-03-17T22:03:08+08:00">2020-03-17</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
<p>
The original blog locates at 
<a href="https://blog.csdn.net/buchunjiedexin" target="_blank" rel="noopener">CSDN XiaoxingChen's Blog</a>.
Due to its terrible support to mathematical equation and version control, I turned to 
log my daily thinkings and notes in private git repositories.
So far I start to make some of the contents public, here is the new site for them.
</p>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/20/essential_mat_sig_val/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Xiaoxing">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Xiaoxing Chen's Space">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/20/essential_mat_sig_val/" class="post-title-link" itemprop="url">Singular Values of Essential Matrix</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-01-20 17:13:14" itemprop="dateCreated datePublished" datetime="2020-01-20T17:13:14+08:00">2020-01-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-29 12:22:16" itemprop="dateModified" datetime="2020-03-29T12:22:16+08:00">2020-03-29</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <head>
    <script type="text/javascript" async
            src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
        </script>
        <style>
            .bib ol { counter-reset: item }
            .bib li { display: block ; counter-increment: item; }
            .bib li:before { content: " ["counter(item)"] "; }
        </style>
</head>

<body>



<p>Essential matrix is not new to anybody being familiar with Epipolar Geometry. Here is the famous epipolar constraint: </p>
\[
    x_2^\top E x_1 = 0 
\]
<p>
    Recall that when the essential matrix is obtained by 8-point algorithm, 
    one has to decompose the result with SVD to make its third singular value 0 and the other 
    two singular values equal. Here is a short derivation of this property of essential matrix.
</p>

<p>According to the definition of essential matrix: </p>
\[
 E = \{ S R | S = t^\wedge \in \mathfrak{so}(3), R \in SO(3)\} \tag{1-1}
\] 

<p>
    According to the definition of SVD, a singular value \(\sigma\) of a matrix A, 
    equals to the square root of correspondent eigenvalue \(\lambda\) of matrix \(A^\top A\):
</p>
\[
   \sigma_{A,i} = \sqrt{\lambda_{A^\top A,i}} \tag{1-2}
 \]
<p>Meanwhile,</p>
 \[
    E^\top E = R^\top S^\top S R = -R^\top (t^\wedge)^2 R \tag{1-3}
 \]
 <p>According to the property of askew-symmetric matrix:</p>
 \[
    (t^\wedge)^2 = \|t\|^2 I - t t^\top \tag{1-4}
 \]
 <p>The first term is a scalar matrix with three equal eigenvalues \(\|t\|^2\)</p>
 <p>The second term \(t t^\top\) is a symmetric matrix, which is therefore semi-positive definite.
    It can be diagonalized<sup><a href="/2020/01/20/mat_generated_by_outer_product">[1]</a></sup>:
 </p>
 \[
    t t^\top = \|t\|^2 R_t^\top diag(1, 0, 0) R_t \tag{1-5}
 \]

 <p>Thus, equation (1-3) becomes:</p>
 \[
    E^\top E = \|t\|^2 R^\top R_t^\top ( I - diag(1, 0, 0)) R_t R 
    
 \]
 \[
    = \|t\|^2 (R_t R )^\top diag(1, 1, 0) (R_t R) 
    \tag{1-6}
 \]

 <p>Therefore, eigenvalues of \(E^\top E\) are: \(\|t\|^2 (1, 1, 0)\).</p>
 <p>Finally, according to (1-3), singular values of essential matrix \(E\) are: \(\|t\|(1, 1, 0)\).</p>

 <br>

 <h2>References</h2>
 <ol class="bib">
    <li>Xiaoxing. <a href="/2020/01/20/mat_generated_by_outer_product"><cite>Property of Matrix Generated by Outer Product</cite></a></li>
 </ol>
</body>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/20/mat_generated_by_outer_product/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Xiaoxing">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Xiaoxing Chen's Space">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/20/mat_generated_by_outer_product/" class="post-title-link" itemprop="url">Property of Matrix Generated by Outer Product</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-01-20 00:00:00" itemprop="dateCreated datePublished" datetime="2020-01-20T00:00:00+08:00">2020-01-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-29 12:23:41" itemprop="dateModified" datetime="2020-03-29T12:23:41+08:00">2020-03-29</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
<head>
    <script type="text/javascript" async
            src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
        </script>
</head>
<body>
<p>Given vector \(a\) with length \(m\) and \(b\) with length \(n\), the outer product of them defined as:</p>
\[
    a b^\top = C \tag{1-1}
\]
<p>While matrix \(C\) has dimension \(m \times n\).</p>
<p>Here is a brief discussion of the property of matric \(C\)</p>

<h2>Special Case: \(a = b\)</h2>
<p>Then we have:</p>
\[
    A = a a^\top \tag{1-2}
\]

\[
    A = 
    \left[
    \begin{matrix}
    a_1 a & a_2 a & \cdots & a_n a 
    \end{matrix}
    \right] 
    =
    \left[
    \begin{matrix}
    a_1 a^\top \\ 
    a_2 a^\top \\ 
    \vdots \\ 
    a_n a^\top 
    \end{matrix}
    \right] 
    \tag{1-3}

\]

\[
    A = 
    \left[
    \begin{matrix}
    a_1 a_1 & a_1 a_2 & \cdots & a_1 a_n \\
    a_2 a_1 & a_2 a_2 & \cdots & a_2 a_n \\
    \vdots & \vdots & \ddots & \vdots \\
    a_n a_1 & a_n a_2 & \cdots & a_n a_n \\
    \end{matrix}
    \right]
    \tag{1-4}
\]
<p>Here are several properties of matrix A:</p>
<ol>
    <li>\(det(A) = 0\)</li>
    <li>\(trace(A) = \|a\|^2\)</li>
    <li>\(rank(A) = 1\)</li>
    <li>Eigenvalues of \(A\) are: \([\|a\|^2, 0, \cdots, 0]\)</li>
</ol>
<p>
    According to equation (1-3), all column or row vectors of matrix \(A\) are linear correlated, so its rank is 1.
    Meanwhile, \(A\) is a symmetrical semi positive definite matrix, \(trace(A) = \Sigma_{i = 1}^n \lambda_i\), \(\lambda\) is the eigenvalue  of \(A\).
    Because \(rank(A) = 1\), only the first eigenvalue of \(A\) is not zero. Therefore, \(trace(A) = \lambda_1 = \|a\|^2\).
</p>


<h2>General Case</h2>
\[
    a b^\top = C \tag{1-1}
\]

<p>Properties of matrix C:</p>
<ol>
    <li>Denote \(k = \text{min}(m,n)\)</li>
    <li>\(\text{det}(C) = 0\)</li>
    <li>\(\text{trace}(C) = a[0:k]^\top b[0:k] \)</li>
    <li>\(\text{rank}(C) = 1\)</li>
    <li>Singular values of \(C\) are: \([\|a\|\|b\|, 0, \cdots, 0]\)</li>
</ol>
</body>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/22/linear_combination_in_so3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Xiaoxing">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Xiaoxing Chen's Space">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/10/22/linear_combination_in_so3/" class="post-title-link" itemprop="url">Linear Combination in SO(3)</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-10-22 00:00:00" itemprop="dateCreated datePublished" datetime="2019-10-22T00:00:00+08:00">2019-10-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-29 16:07:25" itemprop="dateModified" datetime="2020-03-29T16:07:25+08:00">2020-03-29</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <head>
    <script type="text/javascript" async
            src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
        </script>
        <style>
            .bib ol { counter-reset: item }
            .bib li { display: block ; counter-increment: item; }
            .bib li:before { content: " ["counter(item)"] "; }
        </style>
</head>
<body>
    <h2>Motivation</h2>
    <p>
        The dot product of two vectors \(a = [a_1, a_2, \cdots, a_n]\) and \(b = [b_1, b_2, \cdots, b_n]\) is defined as<sup>[1]</sup>:
    </p>
    \[
        \mathbf{a} \cdot \mathbf{b} = \sum_{i=1}^n a_i b_i = a_1 b_1 + a_2 b_2 + \cdots + a_n b_n \tag{1-1}
    \]
    <p>The result can be regarded as a linear combination of elements of \(\mathbf{b}\). 
        It is still valid when \(\mathbf{b}\) is a vector of functions, polynomials and matrices.
    </p>
    <p>
        There is an exception when \(\mathbf{b}\) is a vector of rotations: 
        The result of the product is not guaranteed to stay in the \(S^3\) manifold.
        However the the linear combination of rotations is useful to represent the concepts of Rotation like: 
        <i>mean</i>, <i>weighted average</i>. In this article I will give one intuitive explanation of the derivation.
    </p>

    <h2>Cumulative Form of Inner Product</h2>
    <p>A scalar \(c\) was produced by inner product of two vectors:</p>
    \[
        c = \mathbf{a}^\top \mathbf{b} \tag{2-1}
    \]
    <p>
        For any \(k\)th element of \(\mathbf{a}\):
    </p>
        \[
        c = 
        \left[
        \begin{matrix}
        a_1 \\ a_2 \\ \vdots \\ a_n
        \end{matrix}
        \right]^\top

        \left[
        \begin{matrix}
        b_1 \\ b_2 \\ \vdots \\ b_n
        \end{matrix}
        \right]

        =
        \left(
        
        \left[
        \begin{matrix}
        a_1 \\ a_2 \\ \vdots \\ a_{k-1} \\ a_k \\ \vdots \\ a_n
        \end{matrix}
        \right]^\top

        -

        \left[
        \begin{matrix}
        0 \\ 0 \\ \vdots \\ 0 \\ a_{k-1} \\ \vdots \\ 0
        \end{matrix}
        \right]^\top

        \right)

        \left[
        \begin{matrix}
        b_1 \\ b_2 \\ \vdots \\ b_{k-1} \\ b_k \\ \vdots \\ b_n
        \end{matrix}
        \right]

        + a_{k-1} b_k
        = 
        \left[
        \begin{matrix}
        a_1 \\ a_2 \\ \vdots \\ a_{k-1} \\ a_k - a_{k-1} \\ \vdots \\ a_n
        \end{matrix}
        \right]^\top
        
        \left[
        \begin{matrix}
        b_1 \\ b_2 \\ \vdots \\ b_{k-1} + b_k \\ b_k \\ \vdots \\ b_n
        \end{matrix}
        \right]
        \tag{2-2}
    \]
    <p>After applying transform (2-2) to equation (2-1) for \((n - 1)\) times, start from \(n\), end at \(2\):</p>
    \[
        \left[
        \begin{matrix}
        a_1 \\ a_2 \\ \vdots \\ a_{n-2} \\ a_{n-1} \\ a_n
        \end{matrix}
        \right]^\top

        \left[
        \begin{matrix}
        b_1 \\ b_2 \\ \vdots \\ b_{n-2} \\ b_{n-1} \\ b_n
        \end{matrix}
        \right]

        =
        \left[
        \begin{matrix}
        a_1 \\ a_2 \\ \vdots \\ a_{n-2} \\ a_{n-1} \\ a_n - a_{n-1}
        \end{matrix}
        \right]^\top

        \left[
        \begin{matrix}
        b_1 \\ b_2 \\ \vdots \\ b_{n-2} \\ b_{n-1} + b_n \\ b_n
        \end{matrix}
        \right]

        \\
        =
        \left[
        \begin{matrix}
        a_1 \\ a_2 \\ \vdots \\ a_{n-2} \\ a_{n-1} - a_{n-2} \\ a_n - a_{n-1}
        \end{matrix}
        \right]^\top

        \left[
        \begin{matrix}
        b_1 \\ b_2 \\ \vdots \\ b_{n-2} + b_{n-1} + b_n\\ b_{n-1} + b_n \\ b_n
        \end{matrix}
        \right]

        \\
        \vdots

        \\
        = 
        \left[
        \begin{matrix}
        a_0\\ a_1 - a_0\\ \vdots \\ a_{n-2} - a_{n-3} \\ a_{n-1} - a_{n-2} \\ a_n - a_{n-1}
        \end{matrix}
        \right]^\top

        \left[
        \begin{matrix}
        \sum_{i = 0} ^ n b_i \\ 
        \sum_{i = 1} ^ n b_i \\
        \vdots \\ b_{n-2} + b_{n-1} + b_n\\ b_{n-1} + b_n \\ b_n
        \end{matrix}
        \right]
        \tag{2-3}
    \]
    <p>We obtain:</p>
    \[
        \mathbf{a}^\top \mathbf{b} = 
        \left[
        \begin{matrix}
        a_0\\ a_1 - a_0\\ \vdots \\ a_{n-2} - a_{n-3} \\ a_{n-1} - a_{n-2} \\ a_n - a_{n-1}
        \end{matrix}
        \right]^\top

        \left[
        \begin{matrix}
        \sum_{i = 0} ^ n b_i \\ 
        \sum_{i = 1} ^ n b_i \\
        \vdots \\ 
        \sum_{i = n-2} ^ n b_i \\ 
        \sum_{i = n-1} ^ n b_i \\ 
        b_n
        \end{matrix}
        \right]
        
        \tag{2-4}
    \]
    <p>Formula (2-4) can be written as: </p>
    \[
        \mathbf{a}^\top \mathbf{b} = \Delta \mathbf{a}^\top \mathbf{\tilde B} \\
        \Delta {a}_i = 
        \begin{cases}
        a_1 & \text{if} \ i = 1 \\
        a_{i} - a_{i-1} & \text{otherwise}
        \end{cases} \\
        {\tilde B}_i = \sum_{j = n-i} ^ n b_j
        \tag{2-5}

    \]

    <h3>Examples of Cumulative formula</h3>
    <h4>Midpoint of Two Points</h4>
    <p>Given two points \(b_1\) and \(b_2\), the midpoint of them is:</p>
    \[
        b_m = \frac{b_1 + b_2}{2}
        \tag{2-6}
    \]
    <p>
        Formulate (2-6) can be converted to inner product form: \(b_m = \mathbf{a}^\top \mathbf{b}\), where \(\mathbf{a} = [\frac{1}{2}, \frac{1}{2}]^\top\).
        The midpoint can also be represented as position of the first point plus the half-distance between these two points:
    </p>
    \[
        b_m = b_1 + \frac{1}{2}(b_2 - b_1)
        \tag{2-7}
    \]
    <p>Formulate (2-7) corresponds to the cumulative form.</p>
    <h4>Midpoint of Three Points</h4>
    <p>Given three points \(b_1\), \(b_2\) and \(b_3\), the midpoint of them is:</p>
    \[
        b_m = \frac{b_1 + b_2 + b_3}{3}
        \tag{2-8}
    \]
    <p>In cumulative form: </p>
    \[
        b_m = b_1 + \frac{2}{3}(b_2 - b_1) + \frac{1}{3}(b_3 - b_2) 
        \tag{2-9}
    \]

    <br>
    <p>From the two examples above we can see, the cumulative formula converts the combination of vector elements to the 
        combination of the difference between vector elements.
    </p>
    <h2>Linear Combination of Rotations</h2>
    <p>As we know, the <b>Addition</b> was not defined in \(SO(3)\). 
        One can not calculate the "midpoint" of two rotations by adding two rotations.
        Similarly, the <b>Multiplication</b> between scalar and matrices, which means the "cumulation of addition"
        is also invalid.
        Instead, the "cumulation" of a rotation is defined by exponential operation and 
        the "distance" between rotations is be calculated by:
    </p>
    \[
        \Delta R = R_2 R_1^\top
        \tag{3-1}
    \]
    <p>Therefore, the interpolation between two rotations can be represented as:</p>
    \[
        R(t) = (R_2 R_1^\top)^t R_1
        \tag{3-2}
    \]
    <p>Finally, the linear combination \(R_m\) of rotations \(R_i\) with weights \(w_i\) can be derived
         from cumulative formula (2-5)<sup>[2]</sup>:</p>
    \[
        R_m = \prod_{i = 1}^n (\Delta R_i) ^{\tilde w_i} \\
        \Delta {R}_i = 
        \begin{cases}
        R_1 & \text{if} \ i = 1 \\
        R_{i}R_{i-1}^T & \text{otherwise}
        \end{cases} \\
        {\tilde w}_i = \sum_{j = n-i} ^ n w_j
        \tag{3-3}
    \]
    <h3>Example: Average of Four Rotations</h3>
    <p>Given four rotations \(R_1\), \(R_2\), \(R_3\) and \(R_4\), the midpoint of them is:</p>
    \[
        R_m =  
        (R_4 R_3^\top)^{\frac{1}{4}}
        (R_3 R_2^\top)^{\frac{2}{4}}
        (R_2 R_1^\top)^{\frac{3}{4}}
        R_1  
        \tag{3-4}
    \]
    <h2>References</h2>
    <ol class="bib">
        <li>
            S. Lipschutz; M. Lipson (2009). <cite>Linear Algebra (Schaum’s Outlines)</cite> (4th ed.). McGraw Hill
        </li>
        <li>Kim, M.J., Kim, M.S. and Shin, S.Y., 1995, September.
            <cite>
                <a href="http://graphics.cs.cmu.edu/nsp/course/15-464/Fall05/papers/kimKimShin.pdf" target="_blank" rel="noopener">
                    A general construction scheme for unit quaternion curves with simple high order derivatives.        
                </a>
            </cite>
            In Proceedings of the 22nd annual conference on Computer graphics and interactive techniques (pp. 369-376).
        </li>
        <li>
            Moakher, Maher, 
            <cite>
                <a href="https://lcvmwww.epfl.ch/publications/data/articles/63/simaxpaper.pdf" target="_blank" rel="noopener">
                    Means and averaging in the group of rotations
                </a>
            </cite>
                ,SIAM journal on matrix analysis and applications 24.1 (2002): 1-16.
        </li>
        <li>
            Markley, F. Landis, et al.
            <cite>
            <a href="http://www.acsu.buffalo.edu/~johnc/ave_quat07.pdf" target="_blank" rel="noopener">
                "Averaging Quaternions."
            </a>
        </cite>
            Journal of Guidance, Control, and Dynamics 30.4 (2007): 1193-1197.
        </li>
        <li>
            Hartley, Richard, et al. 
            <cite><a href="http://users.cecs.anu.edu.au/~hongdong/rotationaveraging.pdf" target="_blank" rel="noopener">"Rotation averaging."</a></cite>
            International journal of computer vision 103.3 (2013): 267-305.
        </li>
    </ol>
</body>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/10/13/planar_line_segment_intersection/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Xiaoxing">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Xiaoxing Chen's Space">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/10/13/planar_line_segment_intersection/" class="post-title-link" itemprop="url">Determine Intersection of Two Planar Line Segments</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-10-13 00:00:00" itemprop="dateCreated datePublished" datetime="2018-10-13T00:00:00+08:00">2018-10-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-10-04 12:33:12" itemprop="dateModified" datetime="2020-10-04T12:33:12+08:00">2020-10-04</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <head>
    <script type="text/javascript" async
            src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
        </script>
        <style>
            .bib ol { counter-reset: item }
            .bib li { display: block ; counter-increment: item; }
            .bib li:before { content: " ["counter(item)"] "; }
        </style>
</head>
<body>
    <h2>Background</h2>
    <p>
        While implementing a 2D LiDAR simulator, the calculation of the LiDAR measurement was a bottleneck for performance improvement.
        For example, in a particle filter with 1024 particles and each particle represents a 256-line LiDAR,
        running in a map was represented by line segments. For a map with 16 line segments, the estimator have to calculate intersection 
        for \(1024 \times 256 \times 16 = 4194304\) times each update. 
        Therefore, an effective method which determines the intersection of line segments is necessary.
    </p>
    <figure>
        <img src="/2018/10/13/planar_line_segment_intersection/loc_vibration.gif" style="width:80%">
        <figcaption>
            Fig.1 - Particle filter localization with LiDAR.
        </figcaption>
    </figure>
    <h2>Statement of Problem</h2>
    <p>Given two line segments defined by points: \(AB\) and \(CD\), check whether two segments intersect.</p>

    <h2>Intersection of a line and line segment</h2>
    <p>
        Given line \(l\), line segment \(AB\) and its correspondent line \(l_{AB}\). The intersection \(K\) of \(l\) and \(l_{AB}\).
        Then point \(K\) can be expressed as:
    </p>
    \[
        K = A + t \overrightarrow{AB} \tag{3-1}
    \]
    <p>Here is the relationship between \(t\) and \(l\), \(AB\): </p>
    \[
        \begin{cases}
        l \ \text{intersects} \  AB, & t \in (0, 1) \\
        l \ \text{touches} \ AB, & t = 0 \ \text{or} \ t = 1 \\
        l \ \text{misses} \ AB, & t \in (-\infty, 0) \cup (1, \infty) 
        \end{cases}
    \]
    <p style="float: left; font-size: 9pt; text-align: center; width: 30%; margin-right: 1%; margin-bottom: 0.5em;">
        <img src="/2018/10/13/planar_line_segment_intersection/intersect.svg" style="width: 100%">Fig. 3-1: Intersect</p>
    <p style="float: left; font-size: 9pt; text-align: center; width: 30%; margin-right: 1%; margin-bottom: 0.5em;">
        <img src="/2018/10/13/planar_line_segment_intersection/touch.svg" style="width: 100%">Fig. 3-2: Touch</p>
    <p style="float: left; font-size: 9pt; text-align: center; width: 30%; margin-right: 1%; margin-bottom: 0.5em;">
        <img src="/2018/10/13/planar_line_segment_intersection/miss.svg" style="width: 100%">Fig. 3-2: Miss</p>
    <p style="clear: both;"></p>
    <p>Therefore, the sufficient and necessary condition of \(l\) intersecting \(AB\) is: </p>
    \[
        K = A + t \overrightarrow{AB}, \ t \in (0, 1) \tag{3-2}
    \]

    <h2>Lemma A. Determine if Two Line Segments Intersect</h2>
    <p>
        Given line segments \(AB\), \(CD\) and their correspondent line \(l_{AB}\), \(l_{CD}\).
        It is obvious if and only if \(l_{AB}\) intersects \(CD\) and \(l_{CD}\) intersects \(AB\), these two line segments intersect.
    </p>

    <h3>A Rapid Method</h3>
    <p>Line segments \(AB\) intersects \(CD\) if and only if:</p>
    \[
    (\overrightarrow{AC} \times \overrightarrow{AB}) \cdot (\overrightarrow{AB} \times \overrightarrow{AD}) > 0 
    \\
    \text{and}
    \\
    (\overrightarrow{CA} \times \overrightarrow{CD}) \cdot (\overrightarrow{CD} \times \overrightarrow{CB}) > 0
    \tag{4-1}
    \]

    <h3>Proof:</h3>
    <p>According to formula (3-2)</p>
    \[
        m \overrightarrow{AB} = \overrightarrow{AK} 
         = \overrightarrow{AC} + t \overrightarrow{CD} 
         = \overrightarrow{AD} + (1-t) \overrightarrow{DC} 
         \tag{4-2}
    \]
    <p>\(m\) is random none-zero constant. Then we have:</p>
    \[
        \overrightarrow{AB} 
        = \frac{1}{m}(\overrightarrow{AC} + t \overrightarrow{CD})
        \tag{4-3}
    \]
    \[
        \overrightarrow{AB} 
        = \frac{1}{m}(\overrightarrow{AD} + t \overrightarrow{DC})
        \tag{4-4}
    \]
    <p>Then the first term of (4-1) becomes:</p>
    \[
        \frac{t(1-t)}{m^2} (\overrightarrow{AC} \times \overrightarrow{CD}) \cdot (\overrightarrow{DC} \times \overrightarrow{AD}) > 0
        \tag{4-5}
    \]
    <p>For any triangle \(ACD\)：</p>
    \[(
        \overrightarrow{AC} \times \overrightarrow{CD}) \cdot (\overrightarrow{DC} \times \overrightarrow{AD}) =
        |AC||CD|\sin \alpha \cdot |DC||AD| \sin \beta
        \tag{4-6}
    \]
    
    <p>There are two cases listed in Fig. 4-1 and Fig. 4-2. No matter in which case, \(\sin \alpha \sin \beta > 0\).</p>
        <p style="float: left; font-size: 12pt; text-align: center; width: 45%; margin-right: 1%; margin-bottom: 0.5em;">
            <img src="/2018/10/13/planar_line_segment_intersection/cross_prod_case1.svg" style="width: 100%">
            Fig. 4-1: \(\alpha \in (0, \pi)\), \(\beta \in (0, \pi)\), therefore, \(\sin \alpha \sin \beta > 0\).</p>
        <p style="float: left; font-size: 12pt; text-align: center; width: 45%; margin-right: 1%; margin-bottom: 0.5em;">
            <img src="/2018/10/13/planar_line_segment_intersection/cross_prod_case2.svg" style="width: 100%">
            Fig. 4-2: \(\alpha \in (\pi, 2\pi)\), \(\beta \in (\pi, 2 \pi)\), \(\sin \alpha \sin \beta > 0\) as well.</p>
        <p style="clear: both;"></p>
    <p>Becasue \(m^2 > 0\), formula (4-5) becomes:</p>
    \[
        t(1-t) > 0
    \]
    \[
     0 < t < 1 
     \tag{4-7}
    \]
    <p>
        Therefore, the first term of formula (3-1) means \(l_{AB}\) intersects \(CD\). Similarly, the second term means \(l_{CD}\) intersects \(AB\).
        According to Lemma A., \(AB\) intersects \(CD\).
    </t>
</body>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Xiaoxing</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">9</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/xiaoxingchen" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;xiaoxingchen" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:chen-xx@zju.edu.cn" title="E-Mail → mailto:chen-xx@zju.edu.cn" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.linkedin.com/in/%E7%AC%91%E8%A1%8C-%E9%99%88-8b96ba10a/" title="LinkedIn → https:&#x2F;&#x2F;www.linkedin.com&#x2F;in&#x2F;%E7%AC%91%E8%A1%8C-%E9%99%88-8b96ba10a&#x2F;" rel="noopener" target="_blank"><i class="fa fa-fw fa-linkedin-square"></i>LinkedIn</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://xiaoxingchen.github.io/resume/resume_en.html" title="Resume → https:&#x2F;&#x2F;xiaoxingchen.github.io&#x2F;resume&#x2F;resume_en.html" rel="noopener" target="_blank"><i class="fa fa-fw fa-address-card"></i>Resume</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Xiaoxing</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.7.2
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  


</body>
</html>
